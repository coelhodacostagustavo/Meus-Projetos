<!DOCTYPE html>

<html lang="pt-BR">

<head>
    
    <meta charset="UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Imagem Detalhada</title>

    <link rel="stylesheet" type="text/css" href="estilo-imagens.css">

</head>

<body>
    <!--main é o conteudo principal da página, ajudando os motores de busca a entender a estrutura-->
    <!--classe imagem-container usada para aplicar estilos especificos-->
    <main class="imagem-container">
        <!--img exibe a imagem, id facilita a referencia a esse elemento. src vazio pois sera preenchido com js baseado nos parametros da url-->
        <!--alt fornece descrição textual da imagem-->
        <img id="imagem" src="" alt="Detalhes visuais da imagem selecionada.">
        <!--figcaption fornece legenda ou descrição para a imagem-->
        <figcaption id="descricao"></figcaption>

    </main>

    <script>

        function obterParametrosURL() {

        // Inicializa um objeto vazio para guardar os
        // parâmetros da URL de forma mais organizada.
         let parametros = {};

            // Acessa a string de consulta da URL atual (excluindo o símbolo '?').
            let partes = window.location.search.substring(1).split('&');
            // 'window.location.search' retorna a parte da URL que
                        // vem após o '?' incluindo o próprio '?'.
            // 'substring(1)' remove o primeiro caractere, que é o '?'.
            // 'split('&')' divide a string em um array,
                        // usando '&' como delimitador.
    
            // Itera sobre cada item do array 'partes',
                        // onde cada item é um par chave=valor.
            for (let i = 0; i < partes.length; i++) {

                // Divide cada item pelo '=' para separar a chave do valor.
                let par = partes[i].split('=');
                // 'split('=')' transforma a string "chave=valor" em
                        // um array ['chave', 'valor'].
    
                // Decodifica ambos, chave e valor, de URI-component para string normal.
                parametros[decodeURIComponent(par[0])] = decodeURIComponent(par[1]);
                // 'decodeURIComponent' converte percent-encoding em
                        // caracteres legíveis.
                // Por exemplo, converte "%20" de volta para um
                        // espaço em branco.
                // Isso garante que caracteres especiais transmitidos
                        // na URL sejam corretamente interpretados.

            }
            
            // Retorna o objeto com todos os parâmetros decodificados.
            return parametros;
        }
    
        // Executa a função 'obterParametrosURL' e guarda os
                // resultados no objeto 'parametros'.
        let parametros = obterParametrosURL();
        // Esta chamada captura os parâmetros da URL assim que o
                // script é carregado e os organiza em um objeto acessível.
    
        // Acessa o elemento <img> pelo seu ID 'imagem' e define o
                // atributo 'src' com o caminho da imagem obtido
                // dos parâmetros da URL.
        document.getElementById('imagem').src = parametros.imagem;
        // 'document.getElementById' encontra um elemento
                    // pelo seu ID no DOM.
        // '.src' é uma propriedade de elementos <img> que define o
                    // caminho da imagem a ser mostrada.
        // 'parametros.imagem' acessa a propriedade 'imagem' do
                    // objeto 'parametros' para obter o caminho da
                    // imagem correspondente.
    
        // Acessa o elemento <figcaption> pelo seu ID 'descricao' e
                    // atualiza seu conteúdo textual.
        document.getElementById('descricao').textContent = parametros.descricao;
        // '.textContent' altera ou retorna o conteúdo de texto de
                    // um elemento, aqui usado para definir a
                    // descrição da imagem.

    </script>
    
</body>
</html>